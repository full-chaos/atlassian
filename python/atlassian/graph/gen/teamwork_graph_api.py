# Code generated by python/tools/generate_teamwork_graph_models.py. DO NOT EDIT.
from __future__ import annotations

from dataclasses import dataclass
from typing import Any, Dict, List, Optional, Union

from atlassian.errors import SerializationError

# Teamwork Graph APIs are EAP/experimental. They require @optIn(to: "TeamworkGraphContextAPIs")
# and are not available for OAuth-authenticated requests.
# Manager relationship queries require the X-Force-Dynamo: true header.

TEAMWORK_GRAPH_OPT_IN = 'TeamworkGraphContextAPIs'

TEAMWORKGRAPH_TEAMACTIVEPROJECTS = 'query TeamworkGraph_teamActiveProjects(\n  $teamId: ID!,\n  $first: Int,\n  $after: String,\n) {\n  teamworkGraph_teamActiveProjects(\n      teamId: $teamId\n      first: $first\n      after: $after\n    ) @optIn(to: "TeamworkGraphContextAPIs") {\n      version\n      pageInfo { hasNextPage endCursor startCursor hasPreviousPage }\n      edges {\n        cursor\n        node {\n          columns {\n            key\n            value {\n    __typename\n    ... on GraphStoreCypherQueryV2AriNode {\n      id\n      data {\n        __typename\n        ... on TeamV2 { id displayName }\n        ... on AtlassianAccountUser { id accountId name }\n        ... on JiraProject { id name key }\n        ... on TownsquareProject { id name key }\n      }\n    }\n    ... on GraphStoreCypherQueryV2NodeList {\n      nodes {\n        id\n      data {\n        __typename\n        ... on TeamV2 { id displayName }\n        ... on AtlassianAccountUser { id accountId name }\n        ... on JiraProject { id name key }\n        ... on TownsquareProject { id name key }\n      }\n      }\n    }\n    ... on GraphStoreCypherQueryV2StringObject { value }\n    ... on GraphStoreCypherQueryV2IntObject { value }\n    ... on GraphStoreCypherQueryV2FloatObject { value }\n    ... on GraphStoreCypherQueryV2BooleanObject { value }\n    ... on GraphStoreCypherQueryV2TimestampObject { value }\n    ... on GraphStoreCypherQueryV2Path { elements }\n            }\n          }\n        }\n      }\n    }\n}\n'
TEAMWORKGRAPH_TEAMUSERS = 'query TeamworkGraph_teamUsers(\n  $teamId: ID!,\n  $first: Int,\n  $after: String,\n) {\n  teamworkGraph_teamUsers(\n      teamId: $teamId\n      first: $first\n      after: $after\n    ) @optIn(to: "TeamworkGraphContextAPIs") {\n      version\n      pageInfo { hasNextPage endCursor startCursor hasPreviousPage }\n      edges {\n        cursor\n        node {\n          columns {\n            key\n            value {\n    __typename\n    ... on GraphStoreCypherQueryV2AriNode {\n      id\n      data {\n        __typename\n        ... on TeamV2 { id displayName }\n        ... on AtlassianAccountUser { id accountId name }\n        ... on JiraProject { id name key }\n        ... on TownsquareProject { id name key }\n      }\n    }\n    ... on GraphStoreCypherQueryV2NodeList {\n      nodes {\n        id\n      data {\n        __typename\n        ... on TeamV2 { id displayName }\n        ... on AtlassianAccountUser { id accountId name }\n        ... on JiraProject { id name key }\n        ... on TownsquareProject { id name key }\n      }\n      }\n    }\n    ... on GraphStoreCypherQueryV2StringObject { value }\n    ... on GraphStoreCypherQueryV2IntObject { value }\n    ... on GraphStoreCypherQueryV2FloatObject { value }\n    ... on GraphStoreCypherQueryV2BooleanObject { value }\n    ... on GraphStoreCypherQueryV2TimestampObject { value }\n    ... on GraphStoreCypherQueryV2Path { elements }\n            }\n          }\n        }\n      }\n    }\n}\n'
TEAMWORKGRAPH_USERTEAMS = 'query TeamworkGraph_userTeams(\n  $userId: ID!,\n  $first: Int,\n  $after: String,\n) {\n  teamworkGraph_userTeams(\n      userId: $userId\n      first: $first\n      after: $after\n    ) @optIn(to: "TeamworkGraphContextAPIs") {\n      version\n      pageInfo { hasNextPage endCursor startCursor hasPreviousPage }\n      edges {\n        cursor\n        node {\n          columns {\n            key\n            value {\n    __typename\n    ... on GraphStoreCypherQueryV2AriNode {\n      id\n      data {\n        __typename\n        ... on TeamV2 { id displayName }\n        ... on AtlassianAccountUser { id accountId name }\n        ... on JiraProject { id name key }\n        ... on TownsquareProject { id name key }\n      }\n    }\n    ... on GraphStoreCypherQueryV2NodeList {\n      nodes {\n        id\n      data {\n        __typename\n        ... on TeamV2 { id displayName }\n        ... on AtlassianAccountUser { id accountId name }\n        ... on JiraProject { id name key }\n        ... on TownsquareProject { id name key }\n      }\n      }\n    }\n    ... on GraphStoreCypherQueryV2StringObject { value }\n    ... on GraphStoreCypherQueryV2IntObject { value }\n    ... on GraphStoreCypherQueryV2FloatObject { value }\n    ... on GraphStoreCypherQueryV2BooleanObject { value }\n    ... on GraphStoreCypherQueryV2TimestampObject { value }\n    ... on GraphStoreCypherQueryV2Path { elements }\n            }\n          }\n        }\n      }\n    }\n}\n'
TEAMWORKGRAPH_USERMANAGER = 'query TeamworkGraph_userManager(\n  $userId: ID!,\n) {\n  teamworkGraph_userManager(\n      userId: $userId\n    ) @optIn(to: "TeamworkGraphContextAPIs") {\n      version\n      pageInfo { hasNextPage endCursor startCursor hasPreviousPage }\n      edges {\n        cursor\n        node {\n          columns {\n            key\n            value {\n    __typename\n    ... on GraphStoreCypherQueryV2AriNode {\n      id\n      data {\n        __typename\n        ... on TeamV2 { id displayName }\n        ... on AtlassianAccountUser { id accountId name }\n        ... on JiraProject { id name key }\n        ... on TownsquareProject { id name key }\n      }\n    }\n    ... on GraphStoreCypherQueryV2NodeList {\n      nodes {\n        id\n      data {\n        __typename\n        ... on TeamV2 { id displayName }\n        ... on AtlassianAccountUser { id accountId name }\n        ... on JiraProject { id name key }\n        ... on TownsquareProject { id name key }\n      }\n      }\n    }\n    ... on GraphStoreCypherQueryV2StringObject { value }\n    ... on GraphStoreCypherQueryV2IntObject { value }\n    ... on GraphStoreCypherQueryV2FloatObject { value }\n    ... on GraphStoreCypherQueryV2BooleanObject { value }\n    ... on GraphStoreCypherQueryV2TimestampObject { value }\n    ... on GraphStoreCypherQueryV2Path { elements }\n            }\n          }\n        }\n      }\n    }\n}\n'
TEAMWORKGRAPH_USERDIRECTREPORTS = 'query TeamworkGraph_userDirectReports(\n  $userId: ID!,\n) {\n  teamworkGraph_userDirectReports(\n      userId: $userId\n    ) @optIn(to: "TeamworkGraphContextAPIs") {\n      version\n      pageInfo { hasNextPage endCursor startCursor hasPreviousPage }\n      edges {\n        cursor\n        node {\n          columns {\n            key\n            value {\n    __typename\n    ... on GraphStoreCypherQueryV2AriNode {\n      id\n      data {\n        __typename\n        ... on TeamV2 { id displayName }\n        ... on AtlassianAccountUser { id accountId name }\n        ... on JiraProject { id name key }\n        ... on TownsquareProject { id name key }\n      }\n    }\n    ... on GraphStoreCypherQueryV2NodeList {\n      nodes {\n        id\n      data {\n        __typename\n        ... on TeamV2 { id displayName }\n        ... on AtlassianAccountUser { id accountId name }\n        ... on JiraProject { id name key }\n        ... on TownsquareProject { id name key }\n      }\n      }\n    }\n    ... on GraphStoreCypherQueryV2StringObject { value }\n    ... on GraphStoreCypherQueryV2IntObject { value }\n    ... on GraphStoreCypherQueryV2FloatObject { value }\n    ... on GraphStoreCypherQueryV2BooleanObject { value }\n    ... on GraphStoreCypherQueryV2TimestampObject { value }\n    ... on GraphStoreCypherQueryV2Path { elements }\n            }\n          }\n        }\n      }\n    }\n}\n'


def _expect_dict(obj: Any, path: str) -> Dict[str, Any]:
    if not isinstance(obj, dict):
        raise SerializationError(f"Expected object at {path}")
    return obj


def _expect_list(obj: Any, path: str) -> List[Any]:
    if not isinstance(obj, list):
        raise SerializationError(f"Expected list at {path}")
    return obj


def _expect_str(obj: Any, path: str) -> str:
    if not isinstance(obj, str):
        raise SerializationError(f"Expected string at {path}")
    return obj


def _expect_optional_str(obj: Any, path: str) -> Optional[str]:
    if obj is None:
        return None
    if not isinstance(obj, str):
        raise SerializationError(f"Expected string at {path}")
    if not obj:
        raise SerializationError(f"Expected non-empty string at {path}")
    return obj


def _expect_bool(obj: Any, path: str) -> bool:
    if not isinstance(obj, bool):
        raise SerializationError(f"Expected boolean at {path}")
    return obj


def _expect_int(obj: Any, path: str) -> int:
    if not isinstance(obj, int):
        raise SerializationError(f"Expected integer at {path}")
    return obj


def _expect_float(obj: Any, path: str) -> float:
    if not isinstance(obj, (float, int)):
        raise SerializationError(f"Expected float at {path}")
    return float(obj)


@dataclass(frozen=True)
class PageInfo:
    has_next_page: bool
    end_cursor: Optional[str]
    start_cursor: Optional[str]
    has_previous_page: Optional[bool]

    @staticmethod
    def from_dict(obj: Any, path: str) -> "PageInfo":
        raw = _expect_dict(obj, path)
        has_next = _expect_bool(raw.get("hasNextPage"), f"{path}.hasNextPage")
        end_cursor = _expect_optional_str(raw.get("endCursor"), f"{path}.endCursor")
        start_cursor = _expect_optional_str(raw.get("startCursor"), f"{path}.startCursor")
        has_previous = _expect_bool(raw.get("hasPreviousPage"), f"{path}.hasPreviousPage")
        return PageInfo(
            has_next_page=has_next,
            end_cursor=end_cursor,
            start_cursor=start_cursor,
            has_previous_page=has_previous,
        )


@dataclass(frozen=True)
class GraphStoreCypherQueryV2AriNodeData:
    typename: str
    id: Optional[str]
    account_id: Optional[str]
    name: Optional[str]
    display_name: Optional[str]
    key: Optional[str]

    @staticmethod
    def from_dict(obj: Any, path: str) -> "GraphStoreCypherQueryV2AriNodeData":
        raw = _expect_dict(obj, path)
        typename = _expect_str(raw.get("__typename"), f"{path}.__typename")
        mapping = {
    'TeamV2': ('id', None, None, 'displayName', None),
    'AtlassianAccountUser': ('id', 'accountId', 'name', None, None),
    'JiraProject': ('id', None, 'name', None, 'key'),
    'TownsquareProject': ('id', None, 'name', None, 'key'),
        }
        id_field, account_field, name_field, display_field, key_field = mapping.get(
            typename, ("id", "accountId", "name", "displayName", "key")
        )
        return GraphStoreCypherQueryV2AriNodeData(
            typename=typename,
            id=_expect_optional_str(raw.get(id_field), f"{path}.{id_field}")
            if id_field
            else None,
            account_id=_expect_optional_str(
                raw.get(account_field), f"{path}.{account_field}"
            )
            if account_field
            else None,
            name=_expect_optional_str(raw.get(name_field), f"{path}.{name_field}")
            if name_field
            else None,
            display_name=_expect_optional_str(
                raw.get(display_field), f"{path}.{display_field}"
            )
            if display_field
            else None,
            key=_expect_optional_str(raw.get(key_field), f"{path}.{key_field}")
            if key_field
            else None,
        )


@dataclass(frozen=True)
class GraphStoreCypherQueryV2AriNode:
    id: str
    data: Optional[GraphStoreCypherQueryV2AriNodeData]

    @staticmethod
    def from_dict(obj: Any, path: str) -> "GraphStoreCypherQueryV2AriNode":
        raw = _expect_dict(obj, path)
        data_raw = raw.get("data")
        return GraphStoreCypherQueryV2AriNode(
            id=_expect_str(raw.get("id"), f"{path}.id"),
            data=GraphStoreCypherQueryV2AriNodeData.from_dict(
                data_raw, f"{path}.data"
            )
            if data_raw is not None
            else None,
        )


@dataclass(frozen=True)
class GraphStoreCypherQueryV2NodeList:
    nodes: List[GraphStoreCypherQueryV2AriNode]

    @staticmethod
    def from_dict(obj: Any, path: str) -> "GraphStoreCypherQueryV2NodeList":
        raw = _expect_dict(obj, path)
        nodes_raw = _expect_list(raw.get("nodes"), f"{path}.nodes")
        return GraphStoreCypherQueryV2NodeList(
            nodes=[
                GraphStoreCypherQueryV2AriNode.from_dict(item, f"{path}.nodes[{idx}]")
                for idx, item in enumerate(nodes_raw)
            ]
        )


@dataclass(frozen=True)
class GraphStoreCypherQueryV2Path:
    elements: List[str]

    @staticmethod
    def from_dict(obj: Any, path: str) -> "GraphStoreCypherQueryV2Path":
        raw = _expect_dict(obj, path)
        elements = _expect_list(raw.get("elements"), f"{path}.elements")
        return GraphStoreCypherQueryV2Path(
            elements=[
                _expect_str(item, f"{path}.elements[{idx}]")
                for idx, item in enumerate(elements)
            ]
        )


@dataclass(frozen=True)
class GraphStoreCypherQueryV2StringObject:
    value: str

    @staticmethod
    def from_dict(obj: Any, path: str) -> "GraphStoreCypherQueryV2StringObject":
        raw = _expect_dict(obj, path)
        return GraphStoreCypherQueryV2StringObject(
            value=_expect_str(raw.get("value"), f"{path}.value")
        )


@dataclass(frozen=True)
class GraphStoreCypherQueryV2IntObject:
    value: int

    @staticmethod
    def from_dict(obj: Any, path: str) -> "GraphStoreCypherQueryV2IntObject":
        raw = _expect_dict(obj, path)
        return GraphStoreCypherQueryV2IntObject(
            value=_expect_int(raw.get("value"), f"{path}.value")
        )


@dataclass(frozen=True)
class GraphStoreCypherQueryV2FloatObject:
    value: float

    @staticmethod
    def from_dict(obj: Any, path: str) -> "GraphStoreCypherQueryV2FloatObject":
        raw = _expect_dict(obj, path)
        return GraphStoreCypherQueryV2FloatObject(
            value=_expect_float(raw.get("value"), f"{path}.value")
        )


@dataclass(frozen=True)
class GraphStoreCypherQueryV2BooleanObject:
    value: bool

    @staticmethod
    def from_dict(obj: Any, path: str) -> "GraphStoreCypherQueryV2BooleanObject":
        raw = _expect_dict(obj, path)
        return GraphStoreCypherQueryV2BooleanObject(
            value=_expect_bool(raw.get("value"), f"{path}.value")
        )


@dataclass(frozen=True)
class GraphStoreCypherQueryV2TimestampObject:
    value: int

    @staticmethod
    def from_dict(obj: Any, path: str) -> "GraphStoreCypherQueryV2TimestampObject":
        raw = _expect_dict(obj, path)
        return GraphStoreCypherQueryV2TimestampObject(
            value=_expect_int(raw.get("value"), f"{path}.value")
        )


GraphStoreCypherQueryV2Value = Union[
    GraphStoreCypherQueryV2AriNode,
    GraphStoreCypherQueryV2NodeList,
    GraphStoreCypherQueryV2Path,
    GraphStoreCypherQueryV2StringObject,
    GraphStoreCypherQueryV2IntObject,
    GraphStoreCypherQueryV2FloatObject,
    GraphStoreCypherQueryV2BooleanObject,
    GraphStoreCypherQueryV2TimestampObject,
]


def _parse_value(obj: Any, path: str) -> Optional[GraphStoreCypherQueryV2Value]:
    if obj is None:
        return None
    raw = _expect_dict(obj, path)
    typename = raw.get("__typename")
    if typename == 'GraphStoreCypherQueryV2AriNode':
        return GraphStoreCypherQueryV2AriNode.from_dict(raw, path)
    if typename == 'GraphStoreCypherQueryV2NodeList':
        return GraphStoreCypherQueryV2NodeList.from_dict(raw, path)
    if typename == 'GraphStoreCypherQueryV2Path':
        return GraphStoreCypherQueryV2Path.from_dict(raw, path)
    if typename == 'GraphStoreCypherQueryV2StringObject':
        return GraphStoreCypherQueryV2StringObject.from_dict(raw, path)
    if typename == 'GraphStoreCypherQueryV2IntObject':
        return GraphStoreCypherQueryV2IntObject.from_dict(raw, path)
    if typename == 'GraphStoreCypherQueryV2FloatObject':
        return GraphStoreCypherQueryV2FloatObject.from_dict(raw, path)
    if typename == 'GraphStoreCypherQueryV2BooleanObject':
        return GraphStoreCypherQueryV2BooleanObject.from_dict(raw, path)
    if typename == 'GraphStoreCypherQueryV2TimestampObject':
        return GraphStoreCypherQueryV2TimestampObject.from_dict(raw, path)
    if "id" in raw and "data" in raw:
        return GraphStoreCypherQueryV2AriNode.from_dict(raw, path)
    if "nodes" in raw:
        return GraphStoreCypherQueryV2NodeList.from_dict(raw, path)
    if "elements" in raw:
        return GraphStoreCypherQueryV2Path.from_dict(raw, path)
    if "value" in raw:
        value = raw.get("value")
        if isinstance(value, bool):
            return GraphStoreCypherQueryV2BooleanObject.from_dict(raw, path)
        if isinstance(value, int):
            return GraphStoreCypherQueryV2IntObject.from_dict(raw, path)
        if isinstance(value, float):
            return GraphStoreCypherQueryV2FloatObject.from_dict(raw, path)
        if isinstance(value, str):
            return GraphStoreCypherQueryV2StringObject.from_dict(raw, path)
    raise SerializationError(f"Unexpected value type at {path}")


@dataclass(frozen=True)
class GraphStoreCypherQueryV2Column:
    key: str
    value: Optional[GraphStoreCypherQueryV2Value]

    @staticmethod
    def from_dict(obj: Any, path: str) -> "GraphStoreCypherQueryV2Column":
        raw = _expect_dict(obj, path)
        return GraphStoreCypherQueryV2Column(
            key=_expect_str(raw.get("key"), f"{path}.key"),
            value=_parse_value(raw.get("value"), f"{path}.value"),
        )


@dataclass(frozen=True)
class GraphStoreCypherQueryV2Node:
    columns: List[GraphStoreCypherQueryV2Column]

    @staticmethod
    def from_dict(obj: Any, path: str) -> "GraphStoreCypherQueryV2Node":
        raw = _expect_dict(obj, path)
        columns_raw = _expect_list(raw.get("columns"), f"{path}.columns")
        return GraphStoreCypherQueryV2Node(
            columns=[
                GraphStoreCypherQueryV2Column.from_dict(
                    item, f"{path}.columns[{idx}]"
                )
                for idx, item in enumerate(columns_raw)
            ]
        )


@dataclass(frozen=True)
class GraphStoreCypherQueryV2Edge:
    cursor: Optional[str]
    node: GraphStoreCypherQueryV2Node

    @staticmethod
    def from_dict(obj: Any, path: str) -> "GraphStoreCypherQueryV2Edge":
        raw = _expect_dict(obj, path)
        cursor = (
            _expect_optional_str(raw.get("cursor"), f"{path}.cursor")
            if True
            else None
        )
        node = raw.get("node")
        if node is None:
            raise SerializationError(f"Missing {path}.node")
        return GraphStoreCypherQueryV2Edge(
            cursor=cursor,
            node=GraphStoreCypherQueryV2Node.from_dict(node, f"{path}.node"),
        )


@dataclass(frozen=True)
class GraphStoreCypherQueryV2Connection:
    page_info: PageInfo
    edges: List[GraphStoreCypherQueryV2Edge]
    version: str

    @staticmethod
    def from_dict(obj: Any, path: str) -> "GraphStoreCypherQueryV2Connection":
        raw = _expect_dict(obj, path)
        page_info = PageInfo.from_dict(raw.get("pageInfo"), f"{path}.pageInfo")
        edges_raw = _expect_list(raw.get("edges"), f"{path}.edges")
        edges = [
            GraphStoreCypherQueryV2Edge.from_dict(item, f"{path}.edges[{idx}]")
            for idx, item in enumerate(edges_raw)
        ]
        version = _expect_str(raw.get("version"), f"{path}.version")
        return GraphStoreCypherQueryV2Connection(
            page_info=page_info,
            edges=edges,
            version=version,
        )



def parse_teamworkGraph_teamActiveProjects(data: Any) -> GraphStoreCypherQueryV2Connection:
    root = _expect_dict(data, "data")
    result = root.get("teamworkGraph_teamActiveProjects")
    if result is None:
        raise SerializationError("Missing data.teamworkGraph_teamActiveProjects")
    return GraphStoreCypherQueryV2Connection.from_dict(result, "data.teamworkGraph_teamActiveProjects")

def parse_teamworkGraph_teamUsers(data: Any) -> GraphStoreCypherQueryV2Connection:
    root = _expect_dict(data, "data")
    result = root.get("teamworkGraph_teamUsers")
    if result is None:
        raise SerializationError("Missing data.teamworkGraph_teamUsers")
    return GraphStoreCypherQueryV2Connection.from_dict(result, "data.teamworkGraph_teamUsers")

def parse_teamworkGraph_userTeams(data: Any) -> GraphStoreCypherQueryV2Connection:
    root = _expect_dict(data, "data")
    result = root.get("teamworkGraph_userTeams")
    if result is None:
        raise SerializationError("Missing data.teamworkGraph_userTeams")
    return GraphStoreCypherQueryV2Connection.from_dict(result, "data.teamworkGraph_userTeams")

def parse_teamworkGraph_userManager(data: Any) -> GraphStoreCypherQueryV2Connection:
    root = _expect_dict(data, "data")
    result = root.get("teamworkGraph_userManager")
    if result is None:
        raise SerializationError("Missing data.teamworkGraph_userManager")
    return GraphStoreCypherQueryV2Connection.from_dict(result, "data.teamworkGraph_userManager")

def parse_teamworkGraph_userDirectReports(data: Any) -> GraphStoreCypherQueryV2Connection:
    root = _expect_dict(data, "data")
    result = root.get("teamworkGraph_userDirectReports")
    if result is None:
        raise SerializationError("Missing data.teamworkGraph_userDirectReports")
    return GraphStoreCypherQueryV2Connection.from_dict(result, "data.teamworkGraph_userDirectReports")

