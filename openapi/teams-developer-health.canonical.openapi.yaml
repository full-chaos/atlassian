openapi: 3.1.0
info:
  title: Teams Developer Health (Canonical)
  version: 0.1.0
  description: >
    Canonical, API-agnostic schemas used for developer health and analytics pipelines.
    These objects are intentionally stable and versioned independently of Atlassian
    GraphQL Gateway (AGG) or Teams REST response shapes.
components:
  schemas:
    AtlassianTeam:
      type: object
      required:
        - id
        - displayName
        - state
      properties:
        id:
          type: string
          description: ARI format
          minLength: 1
        displayName:
          type: string
          minLength: 1
        description:
          type: string
          nullable: true
        state:
          type: string
          enum: [ACTIVE, ARCHIVED]
        avatarUrl:
          type: string
          nullable: true
        memberCount:
          type: integer
          nullable: true
      additionalProperties: false

    AtlassianTeamMember:
      type: object
      required:
        - teamId
        - accountId
      properties:
        teamId:
          type: string
          minLength: 1
        accountId:
          type: string
          minLength: 1
        displayName:
          type: string
          minLength: 1
          nullable: true
        role:
          type: string
          enum: [REGULAR, ADMIN]
          nullable: true
      additionalProperties: false

    TeamworkProject:
      type: object
      required:
        - teamId
        - projectId
      properties:
        teamId:
          type: string
          minLength: 1
        projectId:
          type: string
          minLength: 1
        projectKey:
          type: string
          nullable: true
        projectName:
          type: string
          nullable: true
      additionalProperties: false

    TeamworkUserRelation:
      type: object
      required:
        - subjectUserId
        - relationType
      properties:
        subjectUserId:
          type: string
          minLength: 1
        relationType:
          type: string
          enum: [TEAM_MEMBER, REPORTS_TO, MANAGES]
        teamId:
          type: string
          nullable: true
        relatedUserId:
          type: string
          nullable: true
      additionalProperties: false
